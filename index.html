<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Scooter Dash ‚Äì Skatepark Edition</title>
<style>
body {
    margin: 0;
    background: #050505;
    color: white;
    font-family: Arial, sans-serif;
    text-align: center;
}
canvas {
    display: block;
    margin: auto;
    background: linear-gradient(#0b0b0f, #141420);
}
</style>
</head>
<body>

<h2>üõ¥ Scooter Dash ‚Äì Skatepark <span id="lvl">1</span>/10</h2>
<p>Space / Click / Touch = Jump</p>

<canvas id="game" width="1000" height="450"></canvas>

<script>
/* ================= CORE ================= */
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
const lvlText = document.getElementById("lvl");

let level = 1;
let speed = 4;
let gameOver = false;
let gravityDir = 1;

/* ================= PLAYER ================= */
const player = {
    x: 150,
    y: 290,
    w: 26,
    h: 42,
    vy: 0,
    onGround: false,
    rot: 0
};

const GRAVITY = 0.7;
const JUMP = -13;

/* ================= WORLD ================= */
let platforms = [];
let spikes = [];
let gravityPortals = [];

/* ================= LEVEL DATA ================= */
const levels = [
    { platforms:[{x:0,y:340,w:3000,h:30}], spikes:[500], portals:[] },
    { platforms:[{x:0,y:340,w:500,h:30},{x:650,y:300,w:200,h:20}], spikes:[400,820], portals:[] },
    { platforms:[{x:0,y:340,w:450,h:30},{x:600,y:280,w:180,h:20}], spikes:[380,760], portals:[520] },
    { platforms:[{x:0,y:340,w:350,h:30},{x:520,y:260,w:200,h:20}], spikes:[300,700], portals:[450] },
    { platforms:[{x:0,y:340,w:300,h:30},{x:480,y:300,w:220,h:20},{x:820,y:260,w:180,h:20}], spikes:[260,640], portals:[] },
    { platforms:[{x:0,y:340,w:260,h:30},{x:420,y:260,w:200,h:20}], spikes:[220,600,760], portals:[350] },
    { platforms:[{x:0,y:340,w:220,h:30},{x:360,y:300,w:200,h:20},{x:720,y:260,w:180,h:20}], spikes:[200,580], portals:[500] },
    { platforms:[{x:0,y:340,w:200,h:30},{x:340,y:260,w:180,h:20},{x:680,y:300,w:200,h:20}], spikes:[180,560,820], portals:[430] },
    { platforms:[{x:0,y:340,w:180,h:30},{x:300,y:280,w:180,h:20},{x:640,y:240,w:180,h:20}], spikes:[160,520], portals:[400,700] },
    { platforms:[{x:0,y:340,w:160,h:30},{x:280,y:260,w:160,h:20},{x:600,y:300,w:160,h:20}], spikes:[140,480,760], portals:[360,640] }
];

function loadLevel() {
    platforms = JSON.parse(JSON.stringify(levels[level-1].platforms));
    spikes = levels[level-1].spikes.map(x => ({x, y:330}));
    gravityPortals = levels[level-1].portals.map(x => ({x, y:0, w:20, h:450}));
    speed = 4 + level * 0.6;
    gravityDir = 1;
    gameOver = false;
    player.y = 290;
    player.vy = 0;
    lvlText.textContent = level;
}
loadLevel();

/* ================= INPUT ================= */
function jump() {
    if (player.onGround && !gameOver) {
        player.vy = JUMP * gravityDir;
        player.onGround = false;
    }
}
document.addEventListener("keydown", e => {
    if (e.code === "Space") jump();
    if (e.code === "KeyR" && gameOver) loadLevel();
});
canvas.addEventListener("click", jump);

/* ================= UPDATE ================= */
function update() {
    if (gameOver) return;

    player.vy += GRAVITY * gravityDir;
    player.y += player.vy;
    player.rot += 0.05;

    player.onGround = false;

    platforms.forEach(p => {
        p.x -= speed;
        if (
            player.x < p.x + p.w &&
            player.x + player.w > p.x &&
            player.y + player.h * gravityDir >= p.y &&
            player.y + player.h * gravityDir <= p.y + 15
        ) {
            player.y = p.y - player.h;
            player.vy = 0;
            player.onGround = true;
        }
    });

    spikes.forEach(s => s.x -= speed);
    gravityPortals.forEach(g => g.x -= speed);

    spikes.forEach(s => {
        if (player.x < s.x + 30 && player.x + player.w > s.x && player.y + player.h > s.y) {
            gameOver = true;
        }
    });

    gravityPortals.forEach(g => {
        if (player.x < g.x + g.w && player.x + player.w > g.x) {
            gravityDir *= -1;
        }
    });

    if (player.y > canvas.height || player.y < -100) gameOver = true;

    if (platforms[platforms.length-1].x + platforms[platforms.length-1].w < -50) {
        level++;
        if (level > 10) {
            alert("üèÅ Alle Level geschafft!");
            level = 1;
        }
        loadLevel();
    }
}

/* ================= DRAW ================= */
function draw() {
    ctx.clearRect(0,0,canvas.width,canvas.height);

    // Background layers
    ctx.fillStyle = "#111";
    for(let i=0;i<canvas.width;i+=120){
        ctx.fillRect((i - speed*0.3)%canvas.width,0,60,450);
    }

    // Platforms
    ctx.fillStyle = "#2a2a2a";
    platforms.forEach(p => {
        ctx.fillRect(p.x,p.y,p.w,p.h);
        ctx.fillStyle = "#444";
        ctx.fillRect(p.x,p.y,p.w,4);
        ctx.fillStyle = "#2a2a2a";
    });

    // Spikes
    ctx.fillStyle = "#ff3355";
    spikes.forEach(s => {
        ctx.beginPath();
        ctx.moveTo(s.x, s.y+30);
        ctx.lineTo(s.x+15, s.y);
        ctx.lineTo(s.x+30, s.y+30);
        ctx.fill();
    });

    // Gravity portals
    ctx.fillStyle = "rgba(150,80,255,0.4)";
    gravityPortals.forEach(g => ctx.fillRect(g.x,g.y,g.w,g.h));

    // Player (Scooter Rider)
    ctx.save();
    ctx.translate(player.x+player.w/2, player.y+player.h/2);
    ctx.rotate(player.rot);
    ctx.fillStyle = "#00ffd0";
    ctx.fillRect(-13,-20,26,40);
    ctx.fillStyle = "#fff";
    ctx.fillRect(-25,20,50,5);
    ctx.restore();

    if (gameOver) {
        ctx.fillStyle = "white";
        ctx.font = "32px Arial";
        ctx.fillText("üíÄ GAME OVER", 400, 200);
        ctx.font = "16px Arial";
        ctx.fillText("Press R to Restart", 420, 230);
    }
}

/* ================= LOOP ================= */
function loop() {
    update();
    draw();
    requestAnimationFrame(loop);
}
loop();
</script>

</body>
</html>
